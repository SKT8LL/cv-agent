import os
import sys

# 프로젝트 루트 경로를 sys.path에 추가하여 모듈 import가 가능하게 함
sys.path.append(os.getcwd())

from jinwook.form_filler import FormFiller

def test_process():
    # 1. 테스트용 가상 자기소개서 내용 (input.txt의 내용을 바탕으로 생성되었다고 가정)
    sample_self_intro = """
[지원동기]
"사람을 위한 자동화, 그 가치를 실현하는 엔지니어"
반복되는 비효율을 자동화하여 사람들이 더 가치 있는 일에 집중할 수 있도록 돕는 백엔드 엔지니어가 되고자 2026년 ICT 학점연계 프로젝트 인턴십에 지원했습니다. 대학교 1학년 때 창업 동아리에서 정산 시스템을 자동화하여 수백 명의 사용자가 겪던 불편함을 해소한 경험은 제게 기술의 진정한 가치를 깨닫게 해주었습니다. 핀다와 같은 핀테크 기업들이 금융 생활의 번거로움을 해결해주는 것처럼, 저 또한 기술로써 누군가의 시간을 벌어주는 백엔드 엔지니어로 성장하고 싶습니다.

[직무 관련 경험]
"Django/Vue.js 플랫폼 개발 및 성능 최적화"
주식회사 영일영에서 Full Stack 개발자로 근무하며 휴대폰 판매 플랫폼을 개발 및 운영했습니다. 당시 재고 분석 페이지의 로딩 속도가 3초 이상 소요되어 사용자 경험을 저해하는 문제가 있었습니다. 저는 이를 해결하기 위해 Django 캐싱을 도입하고 쿼리 최적화를 수행하여 응답 시간을 1초 이내로 단축시켰습니다. 또한, 동화책 수어 번역 프로젝트에서는 FastAPI를 활용하여 REST API를 설계하고, 비동기 처리를 통해 평균 응답 시간을 200ms 이하로 유지하며 안정적인 서비스를 구현했습니다.

[문제 해결 및 도전 경험]
"데이터 손실률 1% 미만으로 개선한 집요함"
실시간 전력 모니터링 프로젝트를 진행하며 MQTT 네트워크 불안정으로 인해 15%의 데이터 손실이 발생하는 문제에 직면했습니다. 데이터의 정확성이 중요한 프로젝트였기에 이는 치명적이었습니다. 저는 QoS 레벨을 상향하고 재연결 로직을 정교하게 구현하여 데이터 손실률을 1% 미만으로 낮추는 데 성공했습니다. 이 과정에서 단순히 코드를 작성하는 것을 넘어, 시스템의 전체적인 안정성을 고려하는 엔지니어링 사고를 기를 수 있었습니다.

[기대 성과 목표]
"안정적인 금융 서비스 구축과 AI 인프라 최적화"
인턴십 기간 동안 저는 두 가지 목표를 달성하고 싶습니다. 첫째, 금융 데이터 처리의 안정성을 높이기 위해 타임아웃, 리트라이, 예외 처리 로직을 고도화하겠습니다. 둘째, Azure 및 LLM 활용 경험을 바탕으로 AI 서비스의 파이프라인을 최적화하여 리소스 비용을 절감하면서도 성능을 유지하는 방안을 제안하겠습니다. 궁극적으로는 팀의 일원으로서 실제 서비스 운영에 기여하며, '대체 불가능한 동료'로 인정받는 것이 저의 목표입니다.
"""

    print("=== 테스트 시작 ===")
    print(f"입력 데이터 길이: {len(sample_self_intro)} 자")
    
    # 2. FormFiller 인스턴스 생성
    filler = FormFiller()
    
    # 3. 프로세스 실행
    try:
        doc_id = filler.process(
            self_intro_content=sample_self_intro,
            doc_title="[TEST] ICT 인턴십 자소서 및 면접 질문"
        )
        print("\n=== 테스트 성공 ===")
        print(f"생성된 문서 ID: {doc_id}")
        print(f"바로가기: https://docs.google.com/document/d/{doc_id}/edit")
        
    except Exception as e:
        print("\n=== 테스트 실패 ===")
        print(f"에러 발생: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    test_process()
